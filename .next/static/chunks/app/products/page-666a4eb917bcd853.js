(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{1936:(e,t,s)=>{Promise.resolve().then(s.bind(s,8280))},8280:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(7437),a=s(5587),l=s(6210),i=s(8456),o=s(4248);let n=e=>{let{product:t}=e,s=t.image,{addItem:n}=(0,a.j)(),{likeCounts:d,userLikes:c,refreshLikes:m}=(0,l.o)(),{user:x,openAuthModal:p}=(0,i.a)(),u=String(t.id),h=d[u]||0,g=c.has(u),b=(null==x?void 0:x.id)||null,f=async()=>{if(!o.Z){alert("Database connection not available");return}if(!b){alert("Please sign in to like products");return}try{if(g){let{error:e}=await o.Z.from("product_likes").delete().eq("product_id",u).eq("user_id",b);e?(console.error("Error unliking product:",{message:e.message,code:e.code,details:e.details,productId:u}),alert("Failed to unlike product. Please try again.")):await m()}else{let{error:e}=await o.Z.from("product_likes").insert({product_id:u,user_id:b});e?"23505"===e.code?await m():(console.error("Error liking product:",{message:e.message,code:e.code,details:e.details,productId:u}),alert("Failed to like product. Please try again.")):await m()}}catch(e){console.error("Unexpected error:",e),alert("An unexpected error occurred. Please try again.")}};return(0,r.jsxs)("div",{className:"group relative flex flex-col overflow-hidden rounded-xl bg-white shadow-md transition-all duration-300 hover:-translate-y-1 hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{className:"h-36 w-full object-cover sm:h-64 md:h-72 lg:h-80",src:s,alt:t.name,loading:"lazy"}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-white/90 rounded-full overflow-hidden shadow-sm",children:[(0,r.jsx)("button",{onClick:f,className:"p-1.5 sm:p-2 transition-colors ".concat(g?"text-red-500":"text-gray-600 hover:text-red-500"),"aria-label":g?"Unlike product":"Like product",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:g?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,r.jsx)("span",{className:"pr-2 text-[10px] sm:text-xs font-semibold text-gray-700",children:h})]})]}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-1 p-3 pb-16 sm:gap-2 sm:p-5 sm:pb-24",children:[(0,r.jsx)("h3",{className:"text-sm font-bold text-gray-800 sm:text-xl line-clamp-1",children:t.name}),t.size&&(0,r.jsx)("h4",{className:"text-[10px] font-medium text-gray-500 sm:text-sm",children:t.size}),(0,r.jsxs)("h4",{className:"pt-0.5 text-sm font-semibold text-brand-pink2 sm:pt-2 sm:text-lg",children:["Starting at $",t.price]}),(0,r.jsxs)("p",{className:"text-[10px] leading-snug text-gray-600 sm:text-sm line-clamp-2",children:["Ingredients: ",t.description]}),t.flavors&&(0,r.jsxs)("p",{className:"text-[10px] italic text-gray-600 sm:text-sm line-clamp-1",children:["Flavors: ",t.flavors.join(", ")]})]}),(0,r.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 p-3 sm:p-5",children:(0,r.jsx)("button",{type:"button",onClick:()=>{if(!x){alert("Please sign in to start your order!"),p&&p();return}n(t)},className:"pointer-events-auto w-full rounded-lg border-2 border-brand-pink2 px-3 py-2 text-xs font-semibold text-brand-pink2 transition-all duration-300 hover:bg-brand-pink2 hover:text-white sm:px-5 sm:py-3 sm:text-base",children:"Add to Cart"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[46,645,130,215,744],()=>t(1936)),_N_E=e.O()}]);